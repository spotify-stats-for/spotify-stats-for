idrupierarupiera!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blackjack Symulator v.1.3</title>
<style>
body { font-family: Arial, sans-serif; background: #2b2b2b; color: #fff; text-align: center; margin:0; padding:0;}
h1 { margin: 10px 0; }
#table { margin: 20px auto; width: 90%; max-width: 800px; min-height: 250px; background: #0b3d0b; border-radius: 15px; padding: 15px; position: relative; }
.hand-container { margin: 10px 0; display: flex; justify-content: center; flex-wrap: wrap; min-height: 60px; }
.card { width: 60px; height: 90px; border-radius: 8px; margin: 5px; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; color: #000; background: #fff; box-shadow: 0 4px 6px rgba(0,0,0,0.5); transition: transform 0.5s, opacity 0.5s; transform-style: preserve-3d; position: relative; }
.card.hidden { background: #444; color: #444; cursor: pointer; }
.card.heart, .card.diamond { color: red; }
.card.club, .card.spade { color: black; }
.controls button { margin: 5px; padding: 10px 15px; font-size: 16px; cursor: pointer; border-radius: 5px; border: none; background: #444; color: #fff; transition: 0.2s; }
.controls button:hover { background: #666; }
#message { margin-top: 15px; font-weight: bold; font-size: 18px; }
#strategy { margin-top: 10px; font-size: 16px; color: #ffd700; cursor: pointer; }
#dealer-value { margin-top:5px; font-size:16px; color:#ffeb3b; }
#history { margin-top: 15px; font-size: 14px; max-width: 800px; margin-left:auto;margin-right:auto;}
</style>
</head>
<body>

<h1>Blackjack simulator v.1.3 by Filip</h1>

<div id="table">
  <div><strong>Krupier:</strong></div>
  <div class="hand-container" id="dealer-hand"></div>
  <div id="dealer-value">Suma odkrytych kart: 0</div>

  <div><strong>Ty:</strong></div>
  <div class="hand-container" id="player-hand"></div>
</div>

<div class="controls">
  <button onclick="hit()">Hit</button>
  <button onclick="stand()">Stand</button>
  <button onclick="doubleBet()">Double</button>
  <button onclick="split()">Split</button>
</div>

<div id="strategy">Pokaż podpowiedź</div>
<div id="message"></div>
<div id="history">Historia: </div>

<script>
const suits = ['♠','♥','♦','♣'];
const values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];

let deck = [], playerHands = [], currentHandIndex = 0, dealerHand = [];
let playerTurn = true, history = [], strategyVisible=false;

function createDeck() {
  deck=[];
  for(let suit of suits){
    for(let value of values){
      deck.push({suit,value});
    }
  }
  deck=shuffle(deck);
}

function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

function drawCard(){ return deck.pop(); }

function startGame(){
  createDeck();
  playerHands=[[drawCard(),drawCard()]];
  currentHandIndex=0;
  dealerHand=[drawCard(),drawCard()];
  playerTurn=true;
  strategyVisible=false;
  document.getElementById('strategy').innerText="Pokaż podpowiedź";
  updateDisplay();
  document.getElementById('message').innerText="Twój ruch!";
}

function handValue(hand){
  let sum=0, aces=0;
  for(let card of hand){
    if(['J','Q','K'].includes(card.value)) sum+=10;
    else if(card.value==='A'){sum+=11; aces++;}
    else sum+=parseInt(card.value);
  }
  while(sum>21 && aces>0){sum-=10; aces--;}
  return sum;
}

function createCardDiv(card, hidden=false){
  const div=document.createElement('div');
  div.className='card';
  if(hidden) div.classList.add('hidden');
  if(card.suit==='♥') div.classList.add('heart');
  if(card.suit==='♦') div.classList.add('diamond');
  if(card.suit==='♣') div.classList.add('club');
  if(card.suit==='♠') div.classList.add('spade');
  div.innerText=hidden?'?':card.value+card.suit;
  div.style.transform="translateY(-50px)";
  setTimeout(()=>{ div.style.transform="translateY(0)"; },50);
  return div;
}

function updateDisplay(showDealer=false){
  const dealerDiv=document.getElementById('dealer-hand');
  dealerDiv.innerHTML="";
  dealerHand.forEach((card,i)=>{
    let hidden=(i===1 && !showDealer);
    dealerDiv.appendChild(createCardDiv(card,hidden));
  });

  const visibleDealerCards = dealerHand.slice(0, showDealer? dealerHand.length : 1);
  document.getElementById('dealer-value').innerText = "Suma odkrytych kart: " + handValue(visibleDealerCards);

  const playerDiv=document.getElementById('player-hand');
  playerDiv.innerHTML="";
  playerHands.forEach((hand,i)=>{
    const handContainer=document.createElement('div');
    handContainer.style.display="flex";
    hand.forEach(card=>{
      handContainer.appendChild(createCardDiv(card));
    });
    const label=document.createElement('div');
    label.innerHTML=` Ręka ${i+1} (Suma: ${handValue(hand)})`;
    if(i===currentHandIndex) label.innerHTML+=" ← Twoja ręka";
    handContainer.appendChild(label);
    playerDiv.appendChild(handContainer);
  });
}

function hit(){ if(!playerTurn) return; playerHands[currentHandIndex].push(drawCard()); updateDisplay(); if(handValue(playerHands[currentHandIndex])>21) nextHandOrDealer(); }
function stand(){ if(!playerTurn) return; nextHandOrDealer(); }
function doubleBet(){ if(!playerTurn) return; playerHands[currentHandIndex].push(drawCard()); nextHandOrDealer(); }
function split(){ const hand=playerHands[currentHandIndex]; if(hand.length===2 && hand[0].value===hand[1].value){ playerHands[currentHandIndex]=[hand[0]]; playerHands.splice(currentHandIndex+1,0,[hand[1]]); playerHands[currentHandIndex].push(drawCard()); playerHands[currentHandIndex+1].push(drawCard()); updateDisplay(); } else alert("Nie możesz splitować tej ręki!"); }

function nextHandOrDealer(){ if(currentHandIndex<playerHands.length-1){ currentHandIndex++; updateDisplay(); } else { playerTurn=false; revealDealerCard(); } }
function revealDealerCard(){ const dealerDiv=document.getElementById('dealer-hand'); const hiddenCard=dealerDiv.children[1]; hiddenCard.style.transition="transform 0.6s"; hiddenCard.style.transform="rotateY(180deg)"; setTimeout(()=>{ updateDisplay(true); dealerPlay(); },600); }
function dealerPlay(){ let sum=handValue(dealerHand); function dealerStep(){ sum=handValue(dealerHand); if(sum<17){ dealerHand.push(drawCard()); updateDisplay(true); setTimeout(dealerStep,600); } else endRound(); } setTimeout(dealerStep,600); }
function endRound(){ const dealerSum=handValue(dealerHand); let msg=""; playerHands.forEach((hand,i)=>{ const sum=handValue(hand); if(sum>21) msg+=`Ręka ${i+1}: Przegrałeś! Bust.<br>`; else if(dealerSum>21) msg+=`Ręka ${i+1}: Wygrałeś! Krupier bust.<br>`; else if(sum>dealerSum) msg+=`Ręka ${i+1}: Wygrałeś!<br>`; else if(sum<dealerSum) msg+=`Ręka ${i+1}: Przegrałeś.<br>`; else msg+=`Ręka ${i+1}: Remis (Push).<br>`; }); updateDisplay(true); document.getElementById('message').innerHTML=msg+" Kliknij aby rozpocząć nową rundę."; history.push(msg.replace(/<br>/g," | ")); document.getElementById('history').innerText="Historia: "+history.join(" || "); document.body.onclick=function(){document.body.onclick=null; startGame();} }

// Funkcja strategii – GLOBALNA
function getStrategy(){
  const hand=playerHands[currentHandIndex];
  const playerSum=handValue(hand);
  const dealerCard=dealerHand[0].value;
  if(hand.length===2 && hand[0].value===hand[1].value) return "Możesz Split!";
  else if(playerSum>=17) return "Stand";
  else if(playerSum>=13 && ['2','3','4','5','6'].includes(dealerCard)) return "Stand";
  else if(playerSum===12 && ['4','5','6'].includes(dealerCard)) return "Stand";
  else if(playerSum===11) return "Double jeśli możliwe, inaczej Hit";
  else if(playerSum===10 && !['10','J','Q','K','A'].includes(dealerCard)) return "Double jeśli możliwe, inaczej Hit";
  else if(playerSum===9 && ['3','4','5','6'].includes(dealerCard)) return "Double jeśli możliwe, inaczej Hit";
  else return "Hit";
}

// Obsługa przycisku podpowiedzi
document.getElementById('strategy').onclick=function(){
  strategyVisible=!strategyVisible;
  document.getElementById('strategy').innerText = strategyVisible 
      ? "Podpowiedź: " + getStrategy() 
      : "Pokaż podpowiedź";
}

// Start gry
startGame();
</script>

</body>
</html>
